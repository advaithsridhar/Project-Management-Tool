"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9672],{53113:function(e,r,t){t.d(r,{Z:function(){return n}});let n=(0,t(79205).Z)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},50935:function(e,r,t){t.d(r,{l0:function(){return u},NI:function(){return v},Wi:function(){return f},xJ:function(){return h},lX:function(){return j},zG:function(){return g}});var n=t(57437),s=t(2265),a=t(37053),l=t(29501),i=t(93448),o=t(6394);let c=(0,t(77712).j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)(o.f,{ref:r,className:(0,i.cn)(c(),t),...s})});d.displayName=o.f.displayName;let u=l.RV,m=s.createContext({}),f=e=>{let{...r}=e;return(0,n.jsx)(m.Provider,{value:{name:r.name},children:(0,n.jsx)(l.Qr,{...r})})},x=()=>{let e=s.useContext(m),r=s.useContext(p),{getFieldState:t,formState:n}=(0,l.Gc)(),a=t(e.name,n);if(!e)throw Error("useFormField should be used within <FormField>");let{id:i}=r;return{id:i,name:e.name,formItemId:"".concat(i,"-form-item"),formDescriptionId:"".concat(i,"-form-item-description"),formMessageId:"".concat(i,"-form-item-message"),...a}},p=s.createContext({}),h=s.forwardRef((e,r)=>{let{className:t,...a}=e,l=s.useId();return(0,n.jsx)(p.Provider,{value:{id:l},children:(0,n.jsx)("div",{ref:r,className:(0,i.cn)("space-y-2",t),...a})})});h.displayName="FormItem";let j=s.forwardRef((e,r)=>{let{className:t,...s}=e,{error:a,formItemId:l}=x();return(0,n.jsx)(d,{ref:r,className:(0,i.cn)(a&&"text-destructive",t),htmlFor:l,...s})});j.displayName="FormLabel";let v=s.forwardRef((e,r)=>{let{...t}=e,{error:s,formItemId:l,formDescriptionId:i,formMessageId:o}=x();return(0,n.jsx)(a.g7,{ref:r,id:l,"aria-describedby":s?"".concat(i," ").concat(o):"".concat(i),"aria-invalid":!!s,...t})});v.displayName="FormControl",s.forwardRef((e,r)=>{let{className:t,...s}=e,{formDescriptionId:a}=x();return(0,n.jsx)("p",{ref:r,id:a,className:(0,i.cn)("text-[0.8rem] text-muted-foreground",t),...s})}).displayName="FormDescription";let g=s.forwardRef((e,r)=>{let{className:t,children:s,...a}=e,{error:l,formMessageId:o}=x(),c=l?String(null==l?void 0:l.message):s;return c?(0,n.jsx)("p",{ref:r,id:o,className:(0,i.cn)("text-[0.8rem] font-medium text-destructive",t),...a,children:c}):null});g.displayName="FormMessage"},40279:function(e,r,t){t.d(r,{I:function(){return l}});var n=t(57437),s=t(2265),a=t(93448);let l=s.forwardRef((e,r)=>{let{className:t,type:s,...l}=e;return(0,n.jsx)("input",{type:s,className:(0,a.cn)("flex h-12 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...l})});l.displayName="Input"},49672:function(e,r,t){t.d(r,{CreateWorkspaceForm:function(){return w}});var n=t(57437),s=t(33145),a=t(53113),l=t(2265),i=t(13590),o=t(29501),c=t(99376),d=t(93448),u=t(52764),m=t(96246),f=t(12381),x=t(79820),p=t(50935),h=t(40279),j=t(87568),v=t(14438),g=t(29827),N=t(21770),b=t(61609);let y=()=>{let e=(0,c.useRouter)(),r=(0,g.NL)();return(0,N.D)({mutationFn:async e=>{let{form:r}=e,t=await b.L.api.workspaces.$post({form:r});return await t.json()},onSuccess:()=>{v.A.success("Workspace created."),e.refresh(),r.invalidateQueries({queryKey:["workspaces"]})},onError:()=>{v.A.error("Failed to create workspace.")}})},w=e=>{let{onCancel:r}=e,t=(0,c.useRouter)(),{mutate:v,isPending:g}=y(),N=(0,l.useRef)(null),b=(0,o.cI)({resolver:(0,i.F)(j.T),defaultValues:{name:""}}),w=e=>{var r;let t=null===(r=e.target.files)||void 0===r?void 0:r[0];t&&b.setValue("image",t)};return(0,n.jsxs)(x.Zb,{className:"w-full h-full border-none shadow-none",children:[(0,n.jsx)(x.Ol,{className:"flex p-7",children:(0,n.jsx)(x.ll,{className:"text-xl font-bold",children:"Create a new workspace"})}),(0,n.jsx)("div",{className:"px-7",children:(0,n.jsx)(u.M,{})}),(0,n.jsx)(x.aY,{className:"p-7",children:(0,n.jsx)(p.l0,{...b,children:(0,n.jsxs)("form",{onSubmit:b.handleSubmit(e=>{v({form:{...e,image:e.image instanceof File?e.image:""}},{onSuccess:e=>{let{data:r}=e;b.reset(),t.push("/workspaces/".concat(r.$id))}})}),children:[(0,n.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,n.jsx)(p.Wi,{control:b.control,name:"name",render:e=>{let{field:r}=e;return(0,n.jsxs)(p.xJ,{children:[(0,n.jsx)(p.lX,{children:"Workspace Name"}),(0,n.jsx)(p.NI,{children:(0,n.jsx)(h.I,{placeholder:"Enter workspace name",...r})}),(0,n.jsx)(p.zG,{})]})}}),(0,n.jsx)(p.Wi,{control:b.control,name:"image",render:e=>{let{field:r}=e;return(0,n.jsx)("div",{className:"flex flex-col gap-y-2",children:(0,n.jsxs)("div",{className:"flex items-center gap-x-5",children:[r.value?(0,n.jsx)("div",{className:"size-[72px] relative rounded-md overflow-hidden",children:(0,n.jsx)(s.default,{src:r.value instanceof File?URL.createObjectURL(r.value):r.value,alt:"Logo",fill:!0,className:"object-cover"})}):(0,n.jsx)(m.qE,{className:"size-[72px]",children:(0,n.jsx)(m.Q5,{children:(0,n.jsx)(a.Z,{className:"size-[36px] text-neutral-400"})})}),(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("p",{className:"text-sm",children:"Workspace Icon"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"JPG, PNG, SVG or JPEG, max 1MB"}),(0,n.jsx)("input",{className:"hidden",accept:".jpg, .png, .jpeg, .svg",type:"file",ref:N,onChange:w,disabled:g}),r.value?(0,n.jsx)(f.z,{variant:"destructive",type:"button",disabled:g,size:"xs",className:"w-fit mt-2",onClick:()=>{r.onChange(null),N.current&&(N.current.value="")},children:"Remove Image"}):(0,n.jsx)(f.z,{variant:"teritary",type:"button",disabled:g,size:"xs",className:"w-fit mt-2",onClick:()=>{var e;return null===(e=N.current)||void 0===e?void 0:e.click()},children:"Upload Image"})]})]})})}})]}),(0,n.jsx)(u.M,{className:"py-7"}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)(f.z,{type:"button",size:"lg",variant:"secondary",onClick:r,disabled:g,className:(0,d.cn)(!r&&"invisible"),children:"Cancel"}),(0,n.jsx)(f.z,{type:"submit",size:"lg",disabled:g,children:"Create Workspace"})]})]})})})]})}},87568:function(e,r,t){t.d(r,{C:function(){return a},T:function(){return s}});var n=t(31229);let s=n.z.object({name:n.z.string().trim().min(1,"Workspace name is required."),image:n.z.union([n.z.instanceof(File),n.z.string().transform(e=>""===e?void 0:e)]).optional()}),a=n.z.object({name:n.z.string().trim().min(1,"Must be 1 or more characters.").optional(),image:n.z.union([n.z.instanceof(File),n.z.string().transform(e=>""===e?void 0:e)]).optional()})}}]);
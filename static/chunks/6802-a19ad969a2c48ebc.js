(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6802],{69174:function(e,s,a){"use strict";a.d(s,{C:function(){return o}});var l=a(57437);a(2265);var t=a(77712),r=a(88534),n=a(93448);let i=(0,t.j)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground",[r.h.TODO]:"border-transparent bg-red-400 text-primary hover:bg-red-400/80",[r.h.IN_PROGRESS]:"border-transparent bg-yellow-400 text-primary hover:bg-yellow-400/80",[r.h.IN_REVIEW]:"border-transparent bg-blue-400 text-primary hover:bg-blue-400/80",[r.h.DONE]:"border-transparent bg-emerald-400 text-primary hover:bg-emerald-400/80",[r.h.BACKLOG]:"border-transparent bg-pink-400 text-primary hover:bg-pink-400/80"}},defaultVariants:{variant:"default"}});function o(e){let{className:s,variant:a,...t}=e;return(0,l.jsx)("div",{className:(0,n.cn)(i({variant:a}),s),...t})}},21069:function(e,s,a){"use strict";a.d(s,{v:function(){return t}});var l=a(99376);let t=()=>(0,l.useParams)().projectId},52029:function(e,s,a){"use strict";a.d(s,{F:function(){return i}});var l=a(29827),t=a(21770),r=a(14438),n=a(61609);let i=()=>{let e=(0,l.NL)();return(0,t.D)({mutationFn:async e=>{let{param:s}=e,a=await n.L.api.tasks[":taskId"].$delete({param:s});if(!a.ok)throw Error("Failed to delete task.");return await a.json()},onSuccess:s=>{let{data:a}=s;r.A.success("Task deleted."),e.invalidateQueries({queryKey:["project-analytics"]}),e.invalidateQueries({queryKey:["workspace-analytics"]}),e.invalidateQueries({queryKey:["tasks"]}),e.invalidateQueries({queryKey:["task",a.$id]})},onError:()=>{r.A.error("Failed to delete task.")}})}},92294:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});var l=a(16593),t=a(61609);let r=e=>{let{workspaceId:s,projectId:a,status:r,assigneeId:n,dueDate:i,search:o}=e;return(0,l.a)({queryKey:["tasks",s,a,r,n,i,o],queryFn:async()=>{let e=await t.L.api.tasks.$get({query:{workspaceId:s,projectId:null!=a?a:void 0,status:null!=r?r:void 0,assigneeId:null!=n?n:void 0,dueDate:null!=i?i:void 0,search:null!=o?o:void 0}});if(!e.ok)throw Error("Failed to fetch tasks.");let{data:l}=await e.json();return l}})}},69678:function(e,s,a){"use strict";a.d(s,{Z:function(){return i}});var l=a(57437),t=a(32864),r=a(70079),n=a(93448);let i=e=>{let{value:s,className:a}=e,i=new Date,o=new Date(s),d=(0,t.j)(o,i),c="text-muted-foreground";return d<=3?c="text-red-500":d<=7?c="text-orange-500":d<=14&&(c="text-yellow-500"),(0,l.jsx)("div",{className:c,children:(0,l.jsx)("span",{className:(0,n.cn)("truncate",a),children:(0,r.WU)(s,"PPP")})})}},56802:function(e,s,a){"use strict";a.d(s,{TaskViewSwitcher:function(){return eT}});var l=a(57437),t=a(99397),r=a(15001),n=a(73020),i=a(2265),o=a(21069),d=a(99406),c=a(52764),u=a(12381),m=a(20271),x=a(93448);let h=m.fC,j=i.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,l.jsx)(m.aV,{ref:s,className:(0,x.cn)("inline-flex h-9 items-center justify-center rounded-lg bg-transparent p-1 text-muted-foreground gap-x-2",a),...t})});j.displayName=m.aV.displayName;let p=i.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,l.jsx)(m.xz,{ref:s,className:(0,x.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm bg-neutral-100 font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-neutral-200 data-[state=active]:text-black",a),...t})});p.displayName=m.xz.displayName;let f=i.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,l.jsx)(m.VY,{ref:s,className:(0,x.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...t})});f.displayName=m.VY.displayName;var g=a(28842),v=a(71533),N=a(16307),b=a(67034),w=a(69174),y=a(96362),k=a(45675),C=a(27413),z=a(99376),E=a(27666),I=a(32060),D=a(52029),O=a(13616);let R=e=>{let{id:s,projectId:a,children:t}=e,r=(0,z.useRouter)(),n=(0,d.m)(),{open:i}=(0,O.D)(),[o,c]=(0,E.N)("Delete Task","This action cannot be undone.","destructive"),{mutate:u,isPending:m}=(0,D.F)(),x=async()=>{await c()&&u({param:{taskId:s}})};return(0,l.jsxs)("div",{className:"flex justify-end",children:[(0,l.jsx)(o,{}),(0,l.jsxs)(I.h_,{modal:!1,children:[(0,l.jsx)(I.$F,{asChild:!0,children:t}),(0,l.jsxs)(I.AW,{align:"end",className:"w-48",children:[(0,l.jsxs)(I.Xi,{onClick:()=>{r.push("/workspaces/".concat(n,"/tasks/").concat(s))},className:"font-medium p-[10px]",children:[(0,l.jsx)(y.Z,{className:"size-4 mr-2 stroke-2"}),"Task Details"]}),(0,l.jsxs)(I.Xi,{onClick:()=>{r.push("/workspaces/".concat(n,"/projects/").concat(a))},className:"font-medium p-[10px]",children:[(0,l.jsx)(y.Z,{className:"size-4 mr-2 stroke-2"}),"Open Project"]}),(0,l.jsxs)(I.Xi,{onClick:()=>{i(s)},className:"font-medium p-[10px]",children:[(0,l.jsx)(k.Z,{className:"size-4 mr-2 stroke-2"}),"Edit Task"]}),(0,l.jsxs)(I.Xi,{onClick:x,disabled:m,className:"text-amber-700 focus:text-amber-700 font-medium p-[10px]",children:[(0,l.jsx)(C.Z,{className:"size-4 mr-2 stroke-2"}),"Delete Task"]})]})]})]})};var S=a(69678);let P=[{accessorKey:"name",header:e=>{let{column:s}=e;return(0,l.jsxs)(u.z,{variant:"ghost",onClick:()=>s.toggleSorting("asc"===s.getIsSorted()),children:["Task Name",(0,l.jsx)(g.Z,{className:"ml-2 h-4 w-4"})]})},cell:e=>{let{row:s}=e,a=s.original.name;return(0,l.jsx)("p",{className:"line-clamp-1",children:a})}},{accessorKey:"project",header:e=>{let{column:s}=e;return(0,l.jsxs)(u.z,{variant:"ghost",onClick:()=>s.toggleSorting("asc"===s.getIsSorted()),children:["Project",(0,l.jsx)(g.Z,{className:"ml-2 h-4 w-4"})]})},cell:e=>{let{row:s}=e,a=s.original.project;return(0,l.jsxs)("div",{className:"flex items-center gap-x-2 text-sm font-medium",children:[(0,l.jsx)(b.t,{className:"size-6",name:a.name,image:a.imageUrl}),(0,l.jsx)("p",{className:"line-clamp-1",children:a.name})]})}},{accessorKey:"assignee",header:e=>{let{column:s}=e;return(0,l.jsxs)(u.z,{variant:"ghost",onClick:()=>s.toggleSorting("asc"===s.getIsSorted()),children:["Assignee",(0,l.jsx)(g.Z,{className:"ml-2 h-4 w-4"})]})},cell:e=>{let{row:s}=e,a=s.original.assignee;return(0,l.jsxs)("div",{className:"flex items-center gap-x-2 text-sm font-medium",children:[(0,l.jsx)(N.s,{className:"size-6",fallbackClassName:"text-xs",name:a.name}),(0,l.jsx)("p",{className:"line-clamp-1",children:a.name})]})}},{accessorKey:"dueDate",header:e=>{let{column:s}=e;return(0,l.jsxs)(u.z,{variant:"ghost",onClick:()=>s.toggleSorting("asc"===s.getIsSorted()),children:["Due Date",(0,l.jsx)(g.Z,{className:"ml-2 h-4 w-4"})]})},cell:e=>{let{row:s}=e,a=s.original.dueDate;return(0,l.jsx)(S.Z,{value:a})}},{accessorKey:"status",header:e=>{let{column:s}=e;return(0,l.jsxs)(u.z,{variant:"ghost",onClick:()=>s.toggleSorting("asc"===s.getIsSorted()),children:["Status",(0,l.jsx)(g.Z,{className:"ml-2 h-4 w-4"})]})},cell:e=>{let{row:s}=e,a=s.original.status;return(0,l.jsx)(w.C,{variant:a,children:(0,x.W)(a)})}},{id:"actions",cell:e=>{let{row:s}=e,a=s.original.$id,t=s.original.projectId;return(0,l.jsx)(R,{id:a,projectId:t,children:(0,l.jsx)(u.z,{variant:"ghost",className:"size-8 p-0",children:(0,l.jsx)(v.Z,{className:"size-4"})})})}}];var Z=a(92451),T=a(31047),V=a(10407),_=a(70079),$=a(33201),K=a(646),A=a(40500),F=a(38549),Q=a(8971),M=a(89897),G=a(45727),L=a(88534);let W={[L.h.BACKLOG]:"border-l-pink-400",[L.h.TODO]:"border-l-red-400",[L.h.IN_PROGRESS]:"border-l-yellow-400",[L.h.IN_REVIEW]:"border-l-blue-400",[L.h.DONE]:"border-l-emerald-400"},B=e=>{let{title:s,assignee:a,project:t,status:r,id:n}=e,i=(0,d.m)(),o=(0,z.useRouter)();return(0,l.jsx)("div",{className:"px-2",children:(0,l.jsxs)("div",{onClick:e=>{e.stopPropagation(),o.push("/workspaces/".concat(i,"/tasks/").concat(n))},className:(0,x.cn)("p-1.5 text-xs bg-white text-primary border rounded-md border-l-4 flex flex-col gap-y-1.5 cursor-pointer hover:opacity-75 transition",W[r]),children:[(0,l.jsx)("p",{children:s}),(0,l.jsxs)("div",{className:"flex items-center gap-x-1",children:[(0,l.jsx)(N.s,{name:null==a?void 0:a.name}),(0,l.jsx)("div",{className:"size-1 rounded-full bg-neutral-300"}),(0,l.jsx)(b.t,{name:null==t?void 0:t.name,image:null==t?void 0:t.imageUrl})]})]})})};a(87676),a(52972);let q={"en-Us":M._},U=(0,G.lD)({format:_.WU,parse:$.Qc,startOfWeek:K.z,getDay:A.w,locales:q}),X=e=>{let{date:s,onNavigate:a}=e;return(0,l.jsxs)("div",{className:"flex mb-4 gap-x-2 items-center w-full lg:w-auto justify-center lg:justify-start",children:[(0,l.jsx)(u.z,{onClick:()=>a("PREV"),variant:"secondary",size:"icon",children:(0,l.jsx)(Z.Z,{className:"size-4"})}),(0,l.jsxs)("div",{className:"flex items-center border border-input rounded-md px-3 py-2 h-8 justify-center w-full lg:w-auto",children:[(0,l.jsx)(T.Z,{className:"size-4 mr-2"}),(0,l.jsx)("p",{className:"text-sm",children:(0,_.WU)(s,"MMMM yyyy")})]}),(0,l.jsx)(u.z,{onClick:()=>a("NEXT"),variant:"secondary",size:"icon",children:(0,l.jsx)(V.Z,{className:"size-4"})})]})},Y=e=>{let{data:s}=e,[a,t]=(0,i.useState)(s.length>0?new Date(s[0].dueDate):new Date),r=s.map(e=>({start:new Date(e.dueDate),end:new Date(e.dueDate),title:e.name,project:e.project,assignee:e.assignee,status:e.status,id:e.$id})),n=e=>{"PREV"===e?t((0,F.W)(a,1)):"NEXT"===e?t((0,Q.z)(a,1)):"TODAY"===e&&t(new Date)};return(0,l.jsx)(G.f,{localizer:U,date:a,events:r,views:["month"],defaultView:"month",toolbar:!0,showAllEvents:!0,className:"h-full",max:new Date(new Date().setFullYear(new Date().getFullYear()+1)),formats:{weekdayFormat:(e,s,a)=>{var l;return null!==(l=null==a?void 0:a.format(e,"EEE",s))&&void 0!==l?l:""}},components:{eventWrapper:e=>{let{event:s}=e;return(0,l.jsx)(B,{id:s.id,title:s.title,assignee:s.assignee,project:s.project,status:s.status})},toolbar:()=>(0,l.jsx)(X,{date:a,onNavigate:n})}})};var H=a(45554),J=a(92369),ee=a(14924),es=a(88221),ea=a(8853),el=a(1959),et=a(15291);let er=()=>(0,n.XI)({projectId:n.Oi,status:(0,n.jx)(Object.values(L.h)),assigneeId:n.Oi,search:n.Oi,dueDate:n.Oi}),en=e=>{let{hideProjectFilter:s}=e,a=(0,d.m)(),{data:t,isLoading:r}=(0,ea.S)({workspaceId:a}),{data:n,isLoading:i}=(0,es.Y)({workspaceId:a}),o=null==t?void 0:t.documents.map(e=>({value:e.$id,label:e.name})),c=null==n?void 0:n.documents.map(e=>({value:e.$id,label:e.name})),[{status:u,assigneeId:m,projectId:x,dueDate:h},j]=er(),p=e=>{"all"===e?j({status:null}):j({status:e})},f=e=>{"all"===e?j({assigneeId:null}):j({assigneeId:e})},g=e=>{"all"===e?j({projectId:null}):j({projectId:e})};return r||i?null:(0,l.jsxs)("div",{className:"flex flex-col lg:flex-row gap-2",children:[(0,l.jsxs)(et.Ph,{defaultValue:null!=u?u:void 0,onValueChange:e=>{p(e)},children:[(0,l.jsx)(et.i4,{className:"w-full lg:w-auto h-8",children:(0,l.jsxs)("div",{className:"flex items-center pr-2",children:[(0,l.jsx)(H.Z,{className:"size-4 mr-2"}),(0,l.jsx)(et.ki,{placeholder:"All statuses"})]})}),(0,l.jsxs)(et.Bw,{children:[(0,l.jsx)(et.Ql,{value:"all",children:"All statuses"}),(0,l.jsx)(et.U$,{}),(0,l.jsx)(et.Ql,{value:L.h.BACKLOG,children:"Backlog"}),(0,l.jsx)(et.Ql,{value:L.h.IN_PROGRESS,children:"In Progress"}),(0,l.jsx)(et.Ql,{value:L.h.IN_REVIEW,children:"In Review"}),(0,l.jsx)(et.Ql,{value:L.h.TODO,children:"Todo"}),(0,l.jsx)(et.Ql,{value:L.h.DONE,children:"Done"})]})]}),(0,l.jsxs)(et.Ph,{defaultValue:null!=m?m:void 0,onValueChange:e=>{f(e)},children:[(0,l.jsx)(et.i4,{className:"w-full lg:w-auto h-8",children:(0,l.jsxs)("div",{className:"flex items-center pr-2",children:[(0,l.jsx)(J.Z,{className:"size-4 mr-2"}),(0,l.jsx)(et.ki,{placeholder:"All assignees"})]})}),(0,l.jsxs)(et.Bw,{children:[(0,l.jsx)(et.Ql,{value:"all",children:"All assignees"}),(0,l.jsx)(et.U$,{}),null==c?void 0:c.map(e=>(0,l.jsx)(et.Ql,{value:e.value,children:e.label},e.value))]})]}),!s&&(0,l.jsxs)(et.Ph,{defaultValue:null!=x?x:void 0,onValueChange:e=>{g(e)},children:[(0,l.jsx)(et.i4,{className:"w-full lg:w-auto h-8",children:(0,l.jsxs)("div",{className:"flex items-center pr-2",children:[(0,l.jsx)(ee.Z,{className:"size-4 mr-2"}),(0,l.jsx)(et.ki,{placeholder:"All projects"})]})}),(0,l.jsxs)(et.Bw,{children:[(0,l.jsx)(et.Ql,{value:"all",children:"All projects"}),(0,l.jsx)(et.U$,{}),null==o?void 0:o.map(e=>(0,l.jsx)(et.Ql,{value:e.value,children:e.label},e.value))]})]}),(0,l.jsx)(el.M,{placeholder:"Due date",className:"h-8 w-full lg:w-auto",value:h?new Date(h):void 0,onChange:e=>{j({dueDate:e?e.toISOString():null})}})]})};var ei=a(82762),eo=a(67782);let ed=e=>{let{task:s}=e;return(0,l.jsxs)("div",{className:"bg-white p-2.5 mb-1.5 rounded shadow-sm space-y-3",children:[(0,l.jsxs)("div",{className:"flex items-start justify-between gap-x-2",children:[(0,l.jsx)("p",{className:"text-sm line-clamp-2",children:s.name}),(0,l.jsx)(R,{id:s.$id,projectId:s.projectId,children:(0,l.jsx)(eo.Z,{className:"size-[18px] stroke-1 shrink-0 text-neutral-700 hover:opacity-75 transition"})})]}),(0,l.jsx)(c.M,{}),(0,l.jsxs)("div",{className:"flex items-center gap-x-1.5",children:[(0,l.jsx)(N.s,{name:s.assignee.name,fallbackClassName:"text-[10px]"}),(0,l.jsx)("div",{className:"size-1 rounded-full bg-neutral-300"}),(0,l.jsx)(S.Z,{value:s.dueDate,className:"text-xs"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-x-1.5",children:[(0,l.jsx)(b.t,{name:s.project.name,image:s.project.imageUrl,fallbackClassName:"text-[10px]"}),(0,l.jsx)("span",{className:"text-xs font-medium",children:s.project.name})]})]})};var ec=a(71303),eu=a(40519),em=a(41430),ex=a(92438),eh=a(92934),ej=a(94802);let ep={[L.h.BACKLOG]:(0,l.jsx)(ec.Z,{className:"size-[18px] text-pink-400"}),[L.h.TODO]:(0,l.jsx)(eu.Z,{className:"size-[18px] text-red-400"}),[L.h.IN_PROGRESS]:(0,l.jsx)(em.Z,{className:"size-[18px] text-yellow-400"}),[L.h.IN_REVIEW]:(0,l.jsx)(ex.Z,{className:"size-[18px] text-blue-400"}),[L.h.DONE]:(0,l.jsx)(eh.Z,{className:"size-[18px] text-emerald-400"})},ef=e=>{let{board:s,taskCount:a}=e,{open:r}=(0,ej.x)(),n=ep[s];return(0,l.jsxs)("div",{className:"px-2 py-1.5 flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center gap-x-2",children:[n,(0,l.jsx)("h2",{className:"text-sm font-medium",children:(0,x.W)(s)}),(0,l.jsx)("div",{className:"size-5 flex items-center justify-center rounded-md bg-neutral-200 text-xs text-neutral-700 font-medium",children:a})]}),(0,l.jsx)(u.z,{onClick:r,variant:"ghost",size:"icon",className:"size-5",children:(0,l.jsx)(t.Z,{className:"size-4 text-neutral-500"})})]})},eg=[L.h.BACKLOG,L.h.TODO,L.h.IN_PROGRESS,L.h.IN_REVIEW,L.h.DONE],ev=e=>{let{data:s,onChange:a}=e,[t,r]=(0,i.useState)(()=>{let e={[L.h.BACKLOG]:[],[L.h.TODO]:[],[L.h.IN_PROGRESS]:[],[L.h.IN_REVIEW]:[],[L.h.DONE]:[]};return s.forEach(s=>{e[s.status].push(s)}),Object.keys(e).forEach(s=>{e[s].sort((e,s)=>e.position-s.position)}),e});(0,i.useEffect)(()=>{let e={[L.h.BACKLOG]:[],[L.h.TODO]:[],[L.h.IN_PROGRESS]:[],[L.h.IN_REVIEW]:[],[L.h.DONE]:[]};s.forEach(s=>{e[s.status].push(s)}),Object.keys(e).forEach(s=>{e[s].sort((e,s)=>e.position-s.position)}),r(e)},[s]);let n=(0,i.useCallback)(e=>{if(!e.destination)return;let{source:s,destination:l}=e,t=s.droppableId,n=l.droppableId,i=[];r(e=>{let a={...e},r=[...a[t]],[o]=r.splice(s.index,1);if(!o)return console.error("No task found at the source index"),e;let d=t!==n?{...o,status:n}:o;a[t]=r;let c=[...a[n]];return c.splice(l.index,0,d),a[n]=c,(i=[]).push({$id:d.$id,status:n,position:Math.min((l.index+1)*1e3,1e6)}),a[n].forEach((e,s)=>{if(e&&e.$id!==d.$id){let a=Math.min((s+1)*1e3,1e6);e.position!==a&&i.push({$id:e.$id,status:n,position:a})}}),t!==n&&a[t].forEach((e,s)=>{if(e){let a=Math.min((s+1)*1e3,1e6);e.position!==a&&i.push({$id:e.$id,status:t,position:a})}}),a}),a(i)},[a]);return(0,l.jsx)(ei.Z5,{onDragEnd:n,children:(0,l.jsx)("div",{className:"flex overflow-x-auto",children:eg.map(e=>(0,l.jsxs)("div",{className:"flex-1 mx-2 bg-muted p-1.5 rounded-md min-w-[200px]",children:[(0,l.jsx)(ef,{board:e,taskCount:t[e].length}),(0,l.jsx)(ei.bK,{droppableId:e,children:s=>(0,l.jsxs)("div",{...s.droppableProps,ref:s.innerRef,className:"min-h-[200px] py-1.5",children:[t[e].map((e,s)=>(0,l.jsx)(ei._l,{draggableId:e.$id,index:s,children:s=>(0,l.jsx)("div",{...s.draggableProps,...s.dragHandleProps,ref:s.innerRef,children:(0,l.jsx)(ed,{task:e})})},e.$id)),s.placeholder]})})]},e))})})};var eN=a(71594),eb=a(24525);let ew=i.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,l.jsx)("div",{className:"relative w-full overflow-auto",children:(0,l.jsx)("table",{ref:s,className:(0,x.cn)("w-full caption-bottom text-sm",a),...t})})});ew.displayName="Table";let ey=i.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,l.jsx)("thead",{ref:s,className:(0,x.cn)("[&_tr]:border-b",a),...t})});ey.displayName="TableHeader";let ek=i.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,l.jsx)("tbody",{ref:s,className:(0,x.cn)("[&_tr:last-child]:border-0",a),...t})});ek.displayName="TableBody",i.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,l.jsx)("tfoot",{ref:s,className:(0,x.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...t})}).displayName="TableFooter";let eC=i.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,l.jsx)("tr",{ref:s,className:(0,x.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...t})});eC.displayName="TableRow";let ez=i.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,l.jsx)("th",{ref:s,className:(0,x.cn)("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...t})});ez.displayName="TableHead";let eE=i.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,l.jsx)("td",{ref:s,className:(0,x.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...t})});function eI(e){var s;let{columns:a,data:t}=e,[r,n]=i.useState([]),[o,d]=i.useState([]),c=(0,eN.b7)({data:t,columns:a,getCoreRowModel:(0,eb.sC)(),getPaginationRowModel:(0,eb.G_)(),onSortingChange:n,getSortedRowModel:(0,eb.tj)(),onColumnFiltersChange:d,getFilteredRowModel:(0,eb.vL)(),state:{sorting:r,columnFilters:o}});return(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"rounded-md border",children:(0,l.jsxs)(ew,{children:[(0,l.jsx)(ey,{children:c.getHeaderGroups().map(e=>(0,l.jsx)(eC,{children:e.headers.map(e=>(0,l.jsx)(ez,{children:e.isPlaceholder?null:(0,eN.ie)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,l.jsx)(ek,{children:(null===(s=c.getRowModel().rows)||void 0===s?void 0:s.length)?c.getRowModel().rows.map(e=>(0,l.jsx)(eC,{"data-state":e.getIsSelected()&&"selected",children:e.getVisibleCells().map(e=>(0,l.jsx)(eE,{children:(0,eN.ie)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,l.jsx)(eC,{children:(0,l.jsx)(eE,{colSpan:a.length,className:"h-24 text-center",children:"No results."})})})]})}),(0,l.jsxs)("div",{className:"flex items-center justify-end space-x-2 py-4",children:[(0,l.jsx)(u.z,{variant:"secondary",size:"sm",onClick:()=>c.previousPage(),disabled:!c.getCanPreviousPage(),children:"Previous"}),(0,l.jsx)(u.z,{variant:"secondary",size:"sm",onClick:()=>c.nextPage(),disabled:!c.getCanNextPage(),children:"Next"})]})]})}eE.displayName="TableCell",i.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,l.jsx)("caption",{ref:s,className:(0,x.cn)("mt-4 text-sm text-muted-foreground",a),...t})}).displayName="TableCaption";var eD=a(92294),eO=a(14438),eR=a(29827),eS=a(21770),eP=a(61609);let eZ=()=>{let e=(0,eR.NL)();return(0,eS.D)({mutationFn:async e=>{let{json:s}=e,a=await eP.L.api.tasks["bulk-update"].$post({json:s});if(!a.ok)throw Error("Failed to update tasks.");return await a.json()},onSuccess:()=>{eO.A.success("Tasks updated."),e.invalidateQueries({queryKey:["project-analytics"]}),e.invalidateQueries({queryKey:["workspace-analytics"]}),e.invalidateQueries({queryKey:["tasks"]})},onError:()=>{eO.A.error("Failed to update tasks.")}})},eT=e=>{var s,a,m;let{hideProjectFilter:x}=e,[{status:g,assigneeId:v,projectId:N,dueDate:b}]=er(),[w,y]=(0,n.v1)("task-view",{defaultValue:"table"}),{mutate:k}=eZ(),C=(0,d.m)(),z=(0,o.v)(),{data:E,isLoading:I}=(0,eD.Z)({workspaceId:C,projectId:z||N,assigneeId:v,status:g,dueDate:b}),D=(0,i.useCallback)(e=>{k({json:{tasks:e}})},[k]),{open:O}=(0,ej.x)();return(0,l.jsx)(h,{defaultValue:w,onValueChange:y,className:"flex-1 w-full border rounded-lg",children:(0,l.jsxs)("div",{className:"h-full flex flex-col overflow-auto p-4",children:[(0,l.jsxs)("div",{className:"flex flex-col gap-y-2 lg:flex-row justify-between items-center",children:[(0,l.jsxs)(j,{className:"w-full lg:w-auto",children:[(0,l.jsx)(p,{className:"h-8 w-full lg:w-auto",value:"table",children:"Table"}),(0,l.jsx)(p,{className:"h-8 w-full lg:w-auto",value:"kanban",children:"Kanban"}),(0,l.jsx)(p,{className:"h-8 w-full lg:w-auto",value:"calendar",children:"Calendar"})]}),(0,l.jsxs)(u.z,{onClick:O,size:"sm",className:"w-full lg:w-auto",children:[(0,l.jsx)(t.Z,{className:"size-4 mr-2"}),"New"]})]}),(0,l.jsx)(c.M,{className:"my-4"}),(0,l.jsx)(en,{hideProjectFilter:x}),(0,l.jsx)(c.M,{className:"my-4"}),I?(0,l.jsx)("div",{className:"w-full border rounded-lg h-[200px] flex flex-col items-center justify-center",children:(0,l.jsx)(r.Z,{className:"size-5 animate-spin text-muted-foreground"})}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(f,{value:"table",className:"mt-0",children:(0,l.jsx)(eI,{columns:P,data:null!==(s=null==E?void 0:E.documents)&&void 0!==s?s:[]})}),(0,l.jsx)(f,{value:"kanban",className:"mt-0",children:(0,l.jsx)(ev,{data:null!==(a=null==E?void 0:E.documents)&&void 0!==a?a:[],onChange:D})}),(0,l.jsx)(f,{value:"calendar",className:"mt-0 h-full pb-4",children:(0,l.jsx)(Y,{data:null!==(m=null==E?void 0:E.documents)&&void 0!==m?m:[]})})]})]})})}},27666:function(e,s,a){"use strict";a.d(s,{N:function(){return o}});var l=a(57437),t=a(2265),r=a(85914),n=a(12381),i=a(79820);let o=function(e,s){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"primary",[o,d]=(0,t.useState)(null),c=()=>{d(null)},u=()=>{null==o||o.resolve(!0),c()},m=()=>{null==o||o.resolve(!1),c()};return[()=>(0,l.jsx)(r.c,{open:null!==o,onOpenChange:c,children:(0,l.jsx)(i.Zb,{className:"size-full border-none shadow-none",children:(0,l.jsxs)(i.aY,{className:"pt-8",children:[(0,l.jsxs)(i.Ol,{className:"p-0",children:[(0,l.jsx)(i.ll,{children:e}),(0,l.jsx)(i.SZ,{children:s})]}),(0,l.jsxs)("div",{className:"pt-4 w-full flex flex-col gap-y-2 lg:flex-row gap-x-2 items-center justify-end",children:[(0,l.jsx)(n.z,{onClick:m,variant:"outline",className:"w-full lg:w-auto",children:"Cancel"}),(0,l.jsx)(n.z,{onClick:u,variant:a,className:"w-full lg:w-auto",children:"Confirm"})]})]})})}),()=>new Promise(e=>{d({resolve:e})})]}},52972:function(){}}]);